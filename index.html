<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Catálogo Oficial - Crediário Meirelles</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

<style>
:root{
 --primary:#1e3a52;
 --bg:#f8fafc;
 --text:#0f172a;
 --border:#e5e7eb;
 --white:#fff;
 --whatsapp:#25d366;
}

*{box-sizing:border-box}

body{
 margin:0;
 font-family:'Inter',sans-serif;
 background:var(--bg);
 color:var(--text);
}

/* HEADER */
header{
 background:linear-gradient(180deg,#0f2235,#0b1a2a);
 padding:55px 20px;
 text-align:center;
 color:white;
}

.logo{
 width:260px;
 border-radius:26px;
 margin-bottom:20px;
 box-shadow:0 14px 35px rgba(0,0,0,.35);
}

.tagline{
 font-weight:600;
 letter-spacing:.5px;
 opacity:.9;
 margin-bottom:22px;
}

/* SOCIAL */
.header-socials{
 display:flex;
 justify-content:center;
 gap:12px;
}

.header-social-item{
 background:#fff;
 color:#000;
 padding:11px 20px;
 border-radius:14px;
 text-decoration:none;
 font-weight:600;
 display:flex;
 align-items:center;
 gap:8px;
 box-shadow:0 6px 18px rgba(0,0,0,.15);
 transition:.25s;
}

.header-social-item:hover{
 transform:translateY(-3px);
 box-shadow:0 10px 28px rgba(0,0,0,.25);
}

/* SEARCH */
.search-section{
 background:#fff;
 padding:18px;
 position:sticky;
 top:0;
 z-index:1000;
 border-bottom:1px solid var(--border);
 display:flex;
 justify-content:center;
}

.search-wrapper{
 width:100%;
 max-width:720px;
 display:flex;
 align-items:center;
 background:#fff;
 border-radius:22px;
 padding:6px 14px;
 box-shadow:0 6px 20px rgba(0,0,0,.08);
}

.search-select{
 border:none;
 background:transparent;
 padding:10px;
 font-weight:600;
 outline:none;
 border-right:1px solid var(--border);
}

.search-input{
 flex:1;
 border:none;
 padding:10px;
 font-size:15px;
 outline:none;
}

/* GRID */
.container{
 max-width:1250px;
 margin:35px auto;
 padding:0 20px;
}

.grid-produtos{
 display:grid;
 grid-template-columns:repeat(auto-fill,minmax(260px,1fr));
 gap:26px;
}

/* CARD */
.card{
 background:#fff;
 border-radius:22px;
 overflow:hidden;
 border:1px solid #f1f5f9;
 transition:.3s;
 animation:fadeUp .4s ease;
}

.card:hover{
 transform:translateY(-6px);
 box-shadow:0 18px 35px rgba(0,0,0,.12);
}

.img-box{
 height:260px;
 display:flex;
 align-items:center;
 justify-content:center;
 padding:16px;
}

.img-box img{
 width:100%;
 height:100%;
 object-fit:contain;
}

.info{
 padding:20px;
 display:flex;
 flex-direction:column;
 height:100%;
}

.nome{
 font-weight:600;
 font-size:16px;
 line-height:1.3;
 min-height:44px;
 margin-bottom:10px;
}

.preco{
 font-size:24px;
 font-weight:800;
 color:var(--primary);
 margin-bottom:14px;
}

.btn-whats{
 margin-top:auto;
 background:var(--whatsapp);
 color:#fff;
 text-decoration:none;
 padding:13px;
 border-radius:14px;
 font-weight:700;
 display:flex;
 justify-content:center;
 gap:8px;
 transition:.25s;
}

.btn-whats:hover{
 filter:brightness(.95);
 transform:translateY(-2px);
}

/* FLOAT */
.wa-float{
 position:fixed;
 right:26px;
 bottom:26px;
 width:60px;
 height:60px;
 background:var(--whatsapp);
 color:white;
 border-radius:50%;
 display:flex;
 align-items:center;
 justify-content:center;
 font-size:30px;
 box-shadow:0 10px 25px rgba(37,211,102,.45);
 animation:pulse 2s infinite;
}

/* ANIMATIONS */
@keyframes fadeUp{
 from{opacity:0;transform:translateY(10px)}
 to{opacity:1;transform:translateY(0)}
}

@keyframes pulse{
 0%{transform:scale(1)}
 50%{transform:scale(1.05)}
 100%{transform:scale(1)}
}

@media(max-width:600px){
 .grid-produtos{grid-template-columns:1fr 1fr;gap:14px}
 .logo{width:210px}
 .img-box{height:200px}
}
</style>
</head>

<body>

<header>
<img src="https://i.postimg.cc/N0D8vD8T/crediariomeirelles.jpg" class="logo">
<div class="tagline">QUALIDADE E CONFIANÇA PARA SUA CASA</div>

<div class="header-socials">
<a class="header-social-item" href="https://www.instagram.com/crediariomeirelles" target="_blank">
<i class="fa-brands fa-instagram" style="color:#e1306c"></i> Instagram
</a>
<a class="header-social-item" href="https://wa.me/554888337779" target="_blank">
<i class="fa-brands fa-whatsapp" style="color:#25d366"></i> WhatsApp
</a>
</div>
</header>

<div class="search-section">
<div class="search-wrapper">
<select id="selectCategorias" class="search-select" onchange="executarBusca()">
<option value="todos">Categorias</option>
</select>
<input id="inputBusca" class="search-input" placeholder="O que você está procurando?" onkeyup="executarBusca()">
<i class="fa-solid fa-magnifying-glass" style="color:#94a3b8"></i>
</div>
</div>

<div class="container">
<div class="grid-produtos" id="lista">
<p style="grid-column:1/-1;text-align:center;padding:50px">Carregando...</p>
</div>
</div>

<a href="https://wa.me/554888337779" class="wa-float" target="_blank">
<i class="fa-brands fa-whatsapp"></i>
</a>

<script>
const WHATSAPP_CONTATO="554888337779";
const SHEET_ID='16FzPEau-EH0E7P13Mq-CFVT0QZceQMLwTUSQ4aZXXf0';
const GID='740385436';
const FULL_URL=`https://docs.google.com/spreadsheets/d/${SHEET_ID}/gviz/tq?tqx=out:json&gid=${GID}&cachebust=${Date.now()}`;

let produtos=[];

async function buscarDadosDoSheets(){
 const r=await fetch(FULL_URL);
 const t=await r.text();
 const j=JSON.parse(t.substring(t.indexOf("{"),t.lastIndexOf("}")+1));
 produtos=j.table.rows.map(row=>{
 const c=row.c;
 return{
 cat:c[0]?.v||"Geral",
 nome:c[1]?.v||"",
 preco:parseFloat(String(c[2]?.v||0).replace(',','.')),
 url:c[3]?.v||""
 }
 }).filter(p=>p.nome&&p.url.startsWith("http"));

 popularSelect();
 renderizar(produtos);
}

function popularSelect(){
 const s=document.getElementById("selectCategorias");
 [...new Set(produtos.map(p=>p.cat))].sort().forEach(cat=>{
 const o=document.createElement("option");
 o.value=cat;o.textContent=cat;
 s.appendChild(o);
 });
}

function executarBusca(){
 const t=inputBusca.value.toLowerCase();
 const c=selectCategorias.value.toLowerCase();
 renderizar(produtos.filter(p=>
 p.nome.toLowerCase().includes(t) &&
 (c==="todos"||p.cat.toLowerCase()===c)
 ));
}

function renderizar(dados){
 lista.innerHTML=dados.map(p=>`
 <div class="card">
  <div class="img-box"><img src="${p.url}"></div>
  <div class="info">
   <div class="nome">${p.nome}</div>
   <div class="preco">R$ ${p.preco.toLocaleString('pt-BR',{minimumFractionDigits:2})}</div>
   <a class="btn-whats" href="https://wa.me/${WHATSAPP_CONTATO}?text=Olá! Vi no catálogo: *${p.nome}*">
   <i class="fa-brands fa-whatsapp"></i> Tenho interesse
   </a>
  </div>
 </div>
 `).join("");
}

window.onload=buscarDadosDoSheets;
</script>

</body>
</html>
